(()=>{"use strict";((e,t)=>{let n,a="F";const r=e=>"F"===e?"imperial":"metric",o=document.getElementById("searchInput"),c=e=>{e.value=""},s=async(e="Lagos",r="imperial")=>{try{const o=await(async(e,t="F")=>{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&APPID=26b92a02cedbcea26aeee0df5d80ea33`,{mode:"cors"});if(n.ok)return await n.json();throw new Error("Unable to fetch the weather data")})(e,r);return t.renderPage(o,a),n=await o,o}catch(e){document.getElementById("error-msg").textContent="Sorry... The city was not found.",setTimeout((()=>{document.getElementById("error-msg").innerHTML=""}),5e3)}},i=e=>{"searchInput"===e.target.id?(c(o),(async e=>{const t=await(async e=>{console.log(e.main);const t=await fetch(`https://api.pexels.com/v1/search?per_page=50&query=${e.main}%20sky`,{method:"GET",headers:{Accept:"application/json",Authorization:"token 563492ad6f917000010000010d39fbe57f3046ef865b0daef097410b"}}),n=await t.json();if(n.total_results>0){const e=Math.floor(49*Math.random());return n.photos[e].src.landscape}return"https://images.pexels.com/photos/912110/pexels-photo-912110.jpeg?auto=compress&cs=tinysrgb&fit=crop&h=627&w=1200"})(e);document.querySelector("body").style.backgroundImage=`url(${t})`})(o.value)):"toggeleUnits"===e.target.id?(e.peventDefault,a="F"===a?"C":"F",s(n.name,r(a))):o.value&&(s(o.value,r(a)),c(o))};s(),o.addEventListener("click",i),o.addEventListener("click",(e=>{o.value&&13===e.which&&s(o.value,r(a))})),document.getElementById("searchBtn").addEventListener("click",i),document.getElementById("toggeleUnits").addEventListener("click",i)})(0,{renderPage:async(e,t="F")=>{const{feels_like:n,temp:a,temp_min:r,temp_max:o}=e.main,{main:c,description:s}=e.weather[0],{name:i}=e,d=Date();document.getElementById("date").innerText=`${d}`,document.getElementById("name").innerText=`${i}, ${e.sys.country} - ${Math.round(a)}º${t}`,document.getElementById("description").innerText=`${s.toUpperCase()} - ${c}`,document.getElementById("feels").innerText=`Current Temperature: ${Math.round(n)} º${t}`,document.getElementById("temp").innerText=`Min temp ${Math.round(r)} º${t} - Max temp ${Math.round(o)} º${t}`,document.getElementById("toggeleUnits").innerText="Change to º"+("C"===t?"F":"C")}})})();